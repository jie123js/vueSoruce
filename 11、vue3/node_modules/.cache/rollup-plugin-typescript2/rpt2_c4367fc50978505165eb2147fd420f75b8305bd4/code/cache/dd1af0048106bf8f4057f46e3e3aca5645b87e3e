{"code":"import { isObject } from \"@vue/shared\";\r\nimport { mutableHandlers, readonlyHandlers, shallowReactiveHandlers, shallowReadonlyHandlers, } from \"./baseHandlers\";\r\n//const reactiveMap = {}  如果等于对象  对象的key不能是对象\r\nconst reactiveMap = new WeakMap(); //弱引用 map的key是可以用对象的 做缓存\r\nconst readonlyMap = new WeakMap();\r\nconst shallowReadonlyMap = new WeakMap();\r\nconst shallowReactiveMap = new WeakMap();\r\nexport function reactive(target) {\r\n    //mutableHandlers\r\n    return createReactiveObject(target, mutableHandlers, reactiveMap);\r\n}\r\nexport function shallowReactive(target) {\r\n    //shallowReactiveHandlers\r\n    return createReactiveObject(target, shallowReactiveHandlers, shallowReactiveMap);\r\n}\r\nexport function readonly(target) {\r\n    //readonlyHandlers\r\n    return createReactiveObject(target, readonlyHandlers, readonlyMap);\r\n}\r\nexport function shallowReadonly(target) {\r\n    //shallowReadonlyHandlers\r\n    return createReactiveObject(target, shallowReadonlyHandlers, shallowReadonlyMap);\r\n}\r\nexport function createReactiveObject(target, baseHandlers, proxyMap) {\r\n    if (!isObject(target)) {\r\n        return target;\r\n    }\r\n    //const proxyMap = isReadonly ? readonlyMap : reactiveMap;\r\n    const existsProxy = proxyMap.get(target);\r\n    if (existsProxy) {\r\n        return existsProxy;\r\n    }\r\n    //创建代理对象 ,reactive(reactive({})) 做缓存 不要重复代理\r\n    const proxy = new Proxy(target, baseHandlers);\r\n    proxyMap.set(target, proxy);\r\n    return proxy;\r\n}\r\n//# sourceMappingURL=reactive.js.map","references":["C:/Users/ZJcoder/Desktop/vue源码/vueSoruce/11、vue3/packages/shared/src/index.ts","C:/Users/ZJcoder/Desktop/vue源码/vueSoruce/11、vue3/packages/reactivity/src/baseHandlers.ts"],"map":"{\"version\":3,\"file\":\"reactive.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../packages/reactivity/src/reactive.ts\"],\"names\":[],\"mappings\":\"AAAA,OAAO,EAAE,QAAQ,EAAE,MAAM,aAAa,CAAC;AACvC,OAAO,EACL,eAAe,EACf,gBAAgB,EAChB,uBAAuB,EACvB,uBAAuB,GACxB,MAAM,gBAAgB,CAAC;AACxB,6CAA6C;AAC7C,MAAM,WAAW,GAAG,IAAI,OAAO,EAAE,CAAC,CAAC,wBAAwB;AAC3D,MAAM,WAAW,GAAG,IAAI,OAAO,EAAE,CAAC;AAClC,MAAM,kBAAkB,GAAG,IAAI,OAAO,EAAE,CAAC;AACzC,MAAM,kBAAkB,GAAG,IAAI,OAAO,EAAE,CAAC;AACzC,MAAM,UAAU,QAAQ,CAAC,MAAc;IACrC,iBAAiB;IACjB,OAAO,oBAAoB,CAAC,MAAM,EAAE,eAAe,EAAE,WAAW,CAAC,CAAC;AACpE,CAAC;AAED,MAAM,UAAU,eAAe,CAAC,MAAc;IAC5C,yBAAyB;IACzB,OAAO,oBAAoB,CACzB,MAAM,EACN,uBAAuB,EACvB,kBAAkB,CACnB,CAAC;AACJ,CAAC;AAED,MAAM,UAAU,QAAQ,CAAC,MAAc;IACrC,kBAAkB;IAClB,OAAO,oBAAoB,CAAC,MAAM,EAAE,gBAAgB,EAAE,WAAW,CAAC,CAAC;AACrE,CAAC;AAED,MAAM,UAAU,eAAe,CAAC,MAAc;IAC5C,yBAAyB;IACzB,OAAO,oBAAoB,CACzB,MAAM,EACN,uBAAuB,EACvB,kBAAkB,CACnB,CAAC;AACJ,CAAC;AAED,MAAM,UAAU,oBAAoB,CAAC,MAAM,EAAE,YAAY,EAAE,QAAQ;IACjE,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE;QACrB,OAAO,MAAM,CAAC;KACf;IACD,0DAA0D;IAC1D,MAAM,WAAW,GAAG,QAAQ,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;IACzC,IAAI,WAAW,EAAE;QACf,OAAO,WAAW,CAAC;KACpB;IACD,2CAA2C;IAC3C,MAAM,KAAK,GAAG,IAAI,KAAK,CAAC,MAAM,EAAE,YAAY,CAAC,CAAC;IAC9C,QAAQ,CAAC,GAAG,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;IAC5B,OAAO,KAAK,CAAC;AACf,CAAC\"}"}
